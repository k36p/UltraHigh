<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>المكتبة</title>

    <link rel="preload" href="/css/style.css" as="style">
    <link rel="preload" href="/css/normalize.css" as="style">
    <link rel="preload" href="/css/resaponsive.css" as="style">
    <link rel="preload" href="https://kit.fontawesome.com/503befbdb7.js" as="script" crossorigin="anonymous">

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/resaponsive.css">

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script src="https://kit.fontawesome.com/503befbdb7.js" crossorigin="anonymous"></script>

    <script src="js/script.js"></script>
    <script src="js/ajax.js"></script>

    <!-- 
    <script src="https://cdn.jsdelivr.net/npm/treeselectjs@0.13.1/dist/treeselectjs.umd.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/treeselectjs@0.13.1/dist/treeselectjs.css" />
 -->

</head>

<body>

    <!-- start Navbar -->

    <div class="navbar">
        <% if(user) {%>
            <div class="userData">
                <img class="cover"
                    src="https://ik.imagekit.io/83055nufx/userIcon/<%=user.gender%>Student.png?updatedAt=1751925030845">
                <p class="username">
                    <%= user.username%>
                </p>
                <button onclick="window.location.href='/profile'" class="setting"><svg width="20" height="20"
                        viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M9.4415 0H10.5585C11.4193 0 12.1836 0.55086 12.4558 1.36754L12.88 2.63999C12.9573 2.87193 13.1169 3.06751 13.3286 3.18976L14.2334 3.7122C14.4451 3.83447 14.6943 3.87492 14.9339 3.8259L16.2479 3.55701C17.0913 3.38443 17.9505 3.77088 18.3809 4.51641L18.9394 5.48373C19.3698 6.22925 19.2749 7.16657 18.7037 7.81067L17.8139 8.8142C17.6516 8.9971 17.5621 9.2332 17.5621 9.4777V10.5224C17.5621 10.7669 17.6517 11.0029 17.8139 11.1859L18.7038 12.1894C19.275 12.8335 19.3699 13.7708 18.9395 14.5163L18.381 15.4837C17.9506 16.2292 17.0914 16.6156 16.248 16.4431L14.934 16.1742C14.6944 16.1251 14.4452 16.1656 14.2335 16.2878L13.3286 16.8102C13.1169 16.9325 12.9573 17.1281 12.88 17.36L12.4558 18.6325C12.1836 19.4491 11.4193 20 10.5585 20H9.4415C8.5806 20 7.81635 19.4491 7.54412 18.6325L7.11999 17.3601C7.04267 17.1281 6.88304 16.9325 6.67128 16.8102L5.76643 16.2879C5.55469 16.1656 5.30551 16.1252 5.06598 16.1742L3.75195 16.4431C2.90856 16.6157 2.04937 16.2293 1.61893 15.4837L1.06045 14.5164C0.630023 13.7709 0.724943 12.8336 1.2961 12.1895L2.18598 11.1859C2.3482 11.003 2.43777 10.767 2.43778 10.5225L2.43779 9.4776C2.43779 9.2331 2.34822 8.9971 2.18599 8.8141L1.29612 7.8106C0.724973 7.1665 0.630053 6.22919 1.06048 5.48366L1.61896 4.51634C2.04939 3.77081 2.90859 3.38436 3.75197 3.55695L5.06598 3.82584C5.30552 3.87486 5.55472 3.83442 5.76646 3.71217L6.6713 3.18976C6.88305 3.06751 7.04267 2.87192 7.11999 2.63996L7.54412 1.36754C7.81635 0.55086 8.5806 0 9.4415 0ZM10 13.5C11.933 13.5 13.5 11.933 13.5 10C13.5 8.067 11.933 6.5 10 6.5C8.067 6.5 6.5 8.067 6.5 10C6.5 11.933 8.067 13.5 10 13.5Z"
                            fill="whitesmoke" />
                    </svg>
                </button>
            </div>
            <% } else{%>

                <button onclick="window.location.href='/login'" class="notLoggedBtn">
                    تسجيل الدخول
                </button>

                <% } %>
                    <img src="media/midad2.png" class="logos">
                    <button id="action1" onclick="test()"><svg width="30" height="25" viewBox="0 0 30 25" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M0 2.08333C0 1.5308 0.225765 1.0009 0.627628 0.610195C1.02949 0.219494 1.57454 0 2.14286 0H27.8571C28.4255 0 28.9705 0.219494 29.3724 0.610195C29.7742 1.0009 30 1.5308 30 2.08333C30 2.63587 29.7742 3.16577 29.3724 3.55647C28.9705 3.94717 28.4255 4.16667 27.8571 4.16667H2.14286C1.57454 4.16667 1.02949 3.94717 0.627628 3.55647C0.225765 3.16577 0 2.63587 0 2.08333ZM0 12.5C0 11.9475 0.225765 11.4176 0.627628 11.0269C1.02949 10.6362 1.57454 10.4167 2.14286 10.4167H27.8571C28.4255 10.4167 28.9705 10.6362 29.3724 11.0269C29.7742 11.4176 30 11.9475 30 12.5C30 13.0525 29.7742 13.5824 29.3724 13.9731C28.9705 14.3638 28.4255 14.5833 27.8571 14.5833H2.14286C1.57454 14.5833 1.02949 14.3638 0.627628 13.9731C0.225765 13.5824 0 13.0525 0 12.5ZM0 22.9167C0 22.3641 0.225765 21.8342 0.627628 21.4435C1.02949 21.0528 1.57454 20.8333 2.14286 20.8333H27.8571C28.4255 20.8333 28.9705 21.0528 29.3724 21.4435C29.7742 21.8342 30 22.3641 30 22.9167C30 23.4692 29.7742 23.9991 29.3724 24.3898C28.9705 24.7805 28.4255 25 27.8571 25H2.14286C1.57454 25 1.02949 24.7805 0.627628 24.3898C0.225765 23.9991 0 23.4692 0 22.9167Z"
                                fill="#A5A5A8" />
                        </svg>

                    </button>
    </div>

    <div class="sidebar">
        <div class="contents">
            <ul class="list-ul">
                <li><svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.35742 17.1113H15.1724" stroke="#a5a5a8" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M2.67871 14.6886C2.67871 9.05759 3.29271 9.45059 6.59771 6.38559C8.04371 5.22159 10.2937 2.97559 12.2367 2.97559C14.1787 2.97559 16.4737 5.21059 17.9327 6.38559C21.2377 9.45059 21.8507 9.05759 21.8507 14.6886C21.8507 22.9756 19.8917 22.9756 12.2647 22.9756C4.63771 22.9756 2.67871 22.9756 2.67871 14.6886Z"
                            stroke="#a5a5a8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <a href="/">الرئيسية</a>
                </li>
                <li class="activeList2"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.8743 16.6719H8.6543" stroke="#a5a5a8" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M15.8743 12.9121H8.6543" stroke="#a5a5a8" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M11.4093 9.15234H8.6543" stroke="#a5a5a8" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M3.88867 12.9756C3.88867 19.9126 5.98667 22.2256 12.2797 22.2256C18.5737 22.2256 20.6707 19.9126 20.6707 12.9756C20.6707 6.03859 18.5737 3.72559 12.2797 3.72559C5.98667 3.72559 3.88867 6.03859 3.88867 12.9756Z"
                            stroke="#a5a5a8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>

                    <a href="/library">الكتب الجامعية</a>
                </li>
                <li> <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12.2783 3.72559C5.34132 3.72559 3.02832 6.03859 3.02832 12.9756C3.02832 19.9126 5.34132 22.2256 12.2783 22.2256C19.2153 22.2256 21.5283 19.9126 21.5283 12.9756"
                            stroke="#a5a5a8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M19.8064 5.27922V5.27922C18.8134 4.40022 17.2964 4.49222 16.4174 5.48522C16.4174 5.48522 12.0484 10.4202 10.5334 12.1332C9.01636 13.8452 10.1284 16.2102 10.1284 16.2102C10.1284 16.2102 12.6324 17.0032 14.1264 15.3152C15.6214 13.6272 20.0124 8.66822 20.0124 8.66822C20.8914 7.67522 20.7984 6.15822 19.8064 5.27922Z"
                            stroke="#a5a5a8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M15.2871 6.77637L18.8821 9.95937" stroke="#a5a5a8" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>

                    <a href="/edit">تعديل الملفات</a>
                </li>
                <li><svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M12.2742 3.49023C7.83993 3.49023 5.91326 7.50547 5.91326 10.1598C5.91326 12.1436 6.20088 11.5598 5.10279 13.9798C3.76184 17.4283 9.15422 18.8379 12.2742 18.8379C15.3933 18.8379 20.7856 17.4283 19.4456 13.9798C18.3475 11.5598 18.6352 12.1436 18.6352 10.1598C18.6352 7.50547 16.7075 3.49023 12.2742 3.49023Z"
                            stroke="#a5a5a8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M14.5839 21.4883C13.2896 22.934 11.2705 22.9511 9.96387 21.4883" stroke="#a5a5a8"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <a href="/notifications">إشعارات هامة</a>
                </li>
                <li><svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M12.2486 3.47559C5.86156 3.47559 4.78256 4.40759 4.78256 11.9046C4.78256 20.2976 4.62556 22.4756 6.22156 22.4756C7.81656 22.4756 10.4216 18.7916 12.2486 18.7916C14.0756 18.7916 16.6806 22.4756 18.2756 22.4756C19.8716 22.4756 19.7146 20.2976 19.7146 11.9046C19.7146 4.40759 18.6356 3.47559 12.2486 3.47559Z"
                            stroke="#a5a5a8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>

                    <a href="/bookMarks">قائمة المرجعيات</a>
                </li>
                <li><svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M11.7714 13.4136C11.7714 13.4136 -0.205275 10.936 3.95667 8.53341C7.46882 6.50611 19.5728 3.02056 21.2638 3.92116C22.1644 5.61216 18.6788 17.7161 16.6515 21.2283C14.249 25.3902 11.7714 13.4136 11.7714 13.4136Z"
                            stroke="#a5a5a8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M11.7715 13.4133L21.2639 3.9209" stroke="#a5a5a8" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <a href="/contact">تواصل</a>
                </li>
            </ul>
            <div class="footer-wright">
                <p class="right">© | Enigma - 2025</p>
            </div>
        </div>
    </div>

    <!-- End navbar -->

    <div class="block" onclick="hideblock()"></div>

    <!-- start content -->

    <div class="path">
        <h5><a href="/">الرئيسية</a> </h5>
        <h5> / </h5>
        <h5>المكتبة</h5>
    </div>
    <% if (data.length> 0) { %>
        <div class="books">
            <form class="rtl bookForm" method="GET" style="display: contents;">
                <input id="searchQuery" name="name" class="searchBookBox" type="text"
                    placeholder=" إسم الكتاب أو المساق">
                <div class="actions">

                    <button id="searchBtn" class="buttonE" onclick="search(event)">
                        <svg class="svgIcon" viewBox="0 0 384 512">
                            <path
                                d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z">
                            </path>
                        </svg>
                    </button>
                    <select name="college" id="collegeId" onchange="loadData(this)" class="filter mr-25">
                        <option>جميع الكليات</option>
                    </select>
                    <select name="specialization" id="specializationId" class="filter mr-25">
                        <option selected disabled value="0">التخصص</option>
                        <option disabled value="0">لم يتم إختيار الكلية</option>
                    </select>
                </div>
            </form>

        </div>


        <% } %>

            <div class="contentsOfBooks">

                <% if (data.length>0) { %>
                    <hr class="line">
                    <% } %>
                        <div class="books-container" id="content">
                            <% if (data.length==0) { %>
                                <div class="noData">
                                    <svg width="300" height="250" viewBox="0 0 119 104" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M59.51 82.14C60.0513 82.14 60.49 81.7012 60.49 81.16C60.49 80.6188 60.0513 80.18 59.51 80.18C58.9688 80.18 58.53 80.6188 58.53 81.16C58.53 81.7012 58.9688 82.14 59.51 82.14Z"
                                            fill="#4A5059" />
                                        <path d="M31.04 8.35999V12.66" stroke="#4A5059" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M28.89 10.51H33.2" stroke="#4A5059" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path
                                            d="M80 35.5C71.62 35.5 63.11 35.16 55.14 32.94C47.17 30.72 40.14 26.56 33.74 21.69C29.54 18.52 25.74 15.99 20.29 16.37C14.9708 16.6566 9.88431 18.6443 5.78004 22.04C-1.14996 28.1 -0.0999627 39.31 2.66004 47.19C6.83004 59.04 19.5 67.29 30.25 72.66C42.68 78.87 56.33 82.48 70.03 84.55C82.03 86.38 97.44 87.7 107.84 79.86C117.4 72.66 120.02 56.22 117.68 45.12C117.109 41.8398 115.359 38.881 112.76 36.8C106.05 31.89 96.04 35.17 88.5 35.33C85.7 35.39 82.86 35.5 80 35.5Z"
                                            fill="#272933" />
                                        <path
                                            d="M66.45 2.49998C66.9912 2.49998 67.43 2.06122 67.43 1.51998C67.43 0.978738 66.9912 0.539978 66.45 0.539978C65.9087 0.539978 65.47 0.978738 65.47 1.51998C65.47 2.06122 65.9087 2.49998 66.45 2.49998Z"
                                            fill="#4A5059" />
                                        <path d="M15.54 78.81V83.11" stroke="#4A5059" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M13.38 80.96H17.69" stroke="#4A5059" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path
                                            d="M59.92 104.01C80.1943 104.01 96.63 102.985 96.63 101.72C96.63 100.455 80.1943 99.43 59.92 99.43C39.6456 99.43 23.21 100.455 23.21 101.72C23.21 102.985 39.6456 104.01 59.92 104.01Z"
                                            fill="#272933" />
                                        <path
                                            d="M89.42 77.19H26.02C25.5956 77.1897 25.1764 77.0972 24.7913 76.9189C24.4062 76.7407 24.0644 76.4809 23.7896 76.1576C23.5147 75.8342 23.3134 75.4551 23.1995 75.0463C23.0856 74.6375 23.0619 74.2088 23.13 73.79L31.23 24.61C31.3436 23.9255 31.6965 23.3037 32.2257 22.855C32.7549 22.4064 33.4262 22.1601 34.12 22.16H97.5C97.9243 22.1603 98.3436 22.2527 98.7287 22.431C99.1138 22.6092 99.4556 22.869 99.7304 23.1924C100.005 23.5157 100.207 23.8949 100.32 24.3037C100.434 24.7125 100.458 25.1411 100.39 25.56L92.29 74.74C92.1788 75.4219 91.8294 76.0423 91.3039 76.4908C90.7784 76.9394 90.1109 77.1872 89.42 77.19Z"
                                            fill="#2D333E" stroke="#4A5059" stroke-miterlimit="10" />
                                        <path
                                            d="M90.1935 20.871L52.5548 4.06593C51.4453 3.57058 50.1443 4.06841 49.649 5.17787L37.7199 31.8957C37.2245 33.0052 37.7224 34.3062 38.8318 34.8015L76.4706 51.6066C77.58 52.102 78.881 51.6042 79.3764 50.4947L91.3055 23.7768C91.8008 22.6674 91.303 21.3664 90.1935 20.871Z"
                                            fill="#2D333E" stroke="#4A5059" stroke-miterlimit="10" />
                                        <path
                                            d="M58.08 26.05C59.0829 24.69 60.5205 23.7136 62.1545 23.2827C63.7885 22.8518 65.5206 22.9924 67.0638 23.6811C68.6069 24.3698 69.8683 25.5652 70.6388 27.0692C71.4092 28.5731 71.6425 30.2953 71.3 31.95"
                                            stroke="#4A5059" stroke-width="0.68" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path
                                            d="M76.0901 24.54C76.6589 24.54 77.1201 24.0788 77.1201 23.51C77.1201 22.9411 76.6589 22.48 76.0901 22.48C75.5212 22.48 75.0601 22.9411 75.0601 23.51C75.0601 24.0788 75.5212 24.54 76.0901 24.54Z"
                                            fill="#4A5059" />
                                        <path
                                            d="M61.17 17.88C61.7389 17.88 62.2 17.4189 62.2 16.85C62.2 16.2812 61.7389 15.82 61.17 15.82C60.6012 15.82 60.14 16.2812 60.14 16.85C60.14 17.4189 60.6012 17.88 61.17 17.88Z"
                                            fill="#4A5059" />
                                        <path
                                            d="M89.14 77.17H25.43C25.0449 77.1713 24.6633 77.0964 24.3072 76.9497C23.9511 76.8029 23.6276 76.5871 23.3552 76.3148C23.0829 76.0424 22.8671 75.7189 22.7204 75.3628C22.5736 75.0067 22.4987 74.6251 22.5 74.24V29.24C22.4987 28.8557 22.5733 28.4749 22.7194 28.1195C22.8656 27.7641 23.0804 27.441 23.3517 27.1688C23.623 26.8966 23.9453 26.6806 24.3003 26.5332C24.6552 26.3859 25.0357 26.31 25.42 26.31H48.62C49.1603 26.3101 49.69 26.4596 50.1506 26.742C50.6112 27.0244 50.9848 27.4286 51.23 27.91L54.54 34.39C54.7836 34.8706 55.1554 35.2745 55.6143 35.5568C56.0732 35.8392 56.6012 35.9891 57.14 35.99H89.14C89.9154 35.99 90.6591 36.2973 91.2083 36.8446C91.7575 37.392 92.0674 38.1346 92.07 38.91V74.24C92.07 74.6248 91.9942 75.0058 91.847 75.3613C91.6997 75.7167 91.4839 76.0397 91.2118 76.3118C90.9398 76.5839 90.6168 76.7997 90.2613 76.947C89.9058 77.0942 89.5248 77.17 89.14 77.17Z"
                                            fill="#2D333E" stroke="#4A5059" stroke-miterlimit="10" />
                                        <path
                                            d="M79.36 37.5C75.6793 37.5 72.0812 38.5915 69.0208 40.6364C65.9604 42.6812 63.5752 45.5877 62.1666 48.9883C60.7581 52.3888 60.3895 56.1306 61.1076 59.7406C61.8257 63.3506 63.5981 66.6666 66.2007 69.2693C68.8034 71.8719 72.1194 73.6443 75.7294 74.3624C79.3394 75.0805 83.0812 74.7119 86.4817 73.3034C89.8823 71.8949 92.7888 69.5096 94.8337 66.4492C96.8785 63.3888 97.97 59.7907 97.97 56.11C97.9713 53.6657 97.4909 51.2452 96.5561 48.9867C95.6213 46.7282 94.2506 44.6762 92.5222 42.9478C90.7938 41.2195 88.7418 39.8487 86.4833 38.9139C84.2248 37.9792 81.8043 37.4987 79.36 37.5Z"
                                            fill="#2D333E" stroke="#4A5059" stroke-miterlimit="10" />
                                        <path d="M92.58 69.63L97.54 74.59" stroke="#4A5059" stroke-width="0.68"
                                            stroke-linecap="round" stroke-linejoin="round" />
                                        <path
                                            d="M96.9747 72.1917L95.4337 73.8036C94.743 74.5262 94.7688 75.672 95.4913 76.3627L108.864 89.1464C109.587 89.8371 110.732 89.8113 111.423 89.0888L112.964 87.4768C113.655 86.7542 113.629 85.6085 112.906 84.9177L99.5337 72.1341C98.8112 71.4433 97.6654 71.4691 96.9747 72.1917Z"
                                            fill="#4A5059" />
                                        <path d="M106.87 1.52002V5.83002" stroke="#4A5059" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M104.72 3.67999H109.03" stroke="#4A5059" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>


                                    <p class="none">المكتبة لاتحتوي على أي كتاب بعد.</p>
                                </div>
                                <% }else { %>

                                    <% for( let i=0; i < data.length; i++ ) { %>
                                        <div class="book-box" onclick="window.location.href='/book/<%= data[i]._id %>'">
                                            <img src="<%=data[i].courseImageUrl%>" alt="Book">

                                            <div class="book-title">
                                                <%= data[i].name %>
                                            </div>
                                            <div class="book-details">
                                                <div class="book-tag">
                                                    <%= data[i].specialization.name %>
                                                </div>
                                                <div class="book-search">
                                                    <svg width="12" height="15" viewBox="0 0 10 11" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M7.72048 8.65489C6.35364 10.0434 4.13757 10.0434 2.77073 8.65489C2.08732 7.96063 1.74561 7.05068 1.74561 6.14074C1.7456 5.23079 2.08731 4.32084 2.77073 3.62657C2.77073 3.62657 3.05813 4.36294 3.93313 4.80738C3.93313 3.91849 4.15187 2.58516 5.23943 1.69629C6.12061 2.58518 7.03549 2.93071 7.72048 3.62657C8.4039 4.32084 8.74561 5.23079 8.74561 6.14074C8.7456 7.05068 8.4039 7.96063 7.72048 8.65489Z"
                                                            stroke="#FF7700" stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                    <%= data[i].views %>
                                                </div>
                                            </div>
                                        </div>
                                        <% } %>
                                            <% } %>
                        </div>

                        <script src="/js/books.js"></script>
                        <!-- end content -->

                        <div class="pagination" id="pagination">
                        </div>

            </div>

            <script>

                async function loadPagination() {
                    // Get all book boxes and convert to array
                    const container = document.getElementsByClassName('book-box');
                    const bookArray = Array.from(container).reverse();;
                    if (bookArray.length === 0) return
                    // Pagination configuration - now based on actual book count
                    const paginationConfig = {
                        itemsPerPage: 20, // Number of items to show per page
                        currentPage: 1,
                        totalPages: Math.ceil(bookArray.length / 20),
                        visiblePageButtons: 5
                    };

                    // Function to show/hide books based on current page
                    function renderItems() {
                        const startIndex = (paginationConfig.currentPage - 1) * paginationConfig.itemsPerPage;
                        const endIndex = startIndex + paginationConfig.itemsPerPage;

                        // Hide all books first
                        bookArray.forEach(book => {
                            book.style.display = 'none';
                        });

                        // Show only books for current page
                        const currentItems = bookArray.slice(startIndex, endIndex);
                        currentItems.forEach(book => {
                            book.style.display = 'block';
                        });
                    }

                    // Function to render pagination controls
                    function renderPagination() {
                        const paginationContainer = document.getElementById('pagination');
                        paginationContainer.innerHTML = '';

                        // Previous button
                        const prevButton = document.createElement('button');
                        prevButton.className = `pagination-button nav ${paginationConfig.currentPage === 1 ? 'disabled' : ''}`;
                        prevButton.innerHTML = '&larr; السابق';
                        prevButton.addEventListener('click', () => {
                            if (paginationConfig.currentPage > 1) {
                                paginationConfig.currentPage--;
                                updatePagination();
                            }
                        });
                        paginationContainer.appendChild(prevButton);

                        // Calculate visible page range
                        let startPage = Math.max(1, paginationConfig.currentPage - Math.floor(paginationConfig.visiblePageButtons / 2));
                        let endPage = Math.min(paginationConfig.totalPages, startPage + paginationConfig.visiblePageButtons - 1);

                        // Adjust if we're near the end
                        if (endPage - startPage + 1 < paginationConfig.visiblePageButtons) {
                            startPage = Math.max(1, endPage - paginationConfig.visiblePageButtons + 1);
                        }

                        // First page and ellipsis if needed
                        if (startPage > 1) {
                            const firstPageButton = document.createElement('button');
                            firstPageButton.className = `pagination-button ${paginationConfig.currentPage === 1 ? 'active' : ''}`;
                            firstPageButton.textContent = '1';
                            firstPageButton.addEventListener('click', () => {
                                paginationConfig.currentPage = 1;
                                updatePagination();
                            });
                            paginationContainer.appendChild(firstPageButton);

                            if (startPage > 2) {
                                const ellipsis = document.createElement('div');
                                ellipsis.className = 'pagination-ellipsis';
                                ellipsis.textContent = '...';
                                paginationContainer.appendChild(ellipsis);
                            }
                        }

                        // Page buttons
                        for (let i = startPage; i <= endPage; i++) {
                            const pageButton = document.createElement('button');
                            pageButton.className = `pagination-button ${paginationConfig.currentPage === i ? 'active' : ''}`;
                            pageButton.textContent = i;
                            pageButton.addEventListener('click', () => {
                                paginationConfig.currentPage = i;
                                updatePagination();
                            });
                            paginationContainer.appendChild(pageButton);
                        }

                        // Last page and ellipsis if needed
                        if (endPage < paginationConfig.totalPages) {
                            if (endPage < paginationConfig.totalPages - 1) {
                                const ellipsis = document.createElement('div');
                                ellipsis.className = 'pagination-ellipsis';
                                ellipsis.textContent = '...';
                                paginationContainer.appendChild(ellipsis);
                            }

                            const lastPageButton = document.createElement('button');
                            lastPageButton.className = `pagination-button ${paginationConfig.currentPage === paginationConfig.totalPages ? 'active' : ''}`;
                            lastPageButton.textContent = paginationConfig.totalPages;
                            lastPageButton.addEventListener('click', () => {
                                paginationConfig.currentPage = paginationConfig.totalPages;
                                updatePagination();
                            });
                            paginationContainer.appendChild(lastPageButton);
                        }

                        // Next button
                        const nextButton = document.createElement('button');
                        nextButton.className = `pagination-button nav ${paginationConfig.currentPage === paginationConfig.totalPages ? 'disabled' : ''}`;
                        nextButton.innerHTML = 'التالي &rarr;';
                        nextButton.addEventListener('click', () => {
                            if (paginationConfig.currentPage < paginationConfig.totalPages) {
                                paginationConfig.currentPage++;
                                updatePagination();
                            }
                        });
                        paginationContainer.appendChild(nextButton);
                    }

                    // Function to update UI when page changes
                    function updatePagination() {
                        renderItems();
                        renderPagination();
                    }

                    updatePagination();
                }

                document.addEventListener('DOMContentLoaded', async function () {
                    loadPagination();
                });


                //////////////////////////////////
                const collegeSelect = document.getElementById('collegeId')
                const specializationSelect = document.getElementById('specializationId');

                async function loadColleges() {
                    try {
                        const response = await fetch('/colleges'); // Assuming this endpoint exists and returns all specializations
                        if (!response.ok) {
                            throw new Error('Failed to fetch colleges');
                        }
                        const colleges = await response.json();

                        collegeSelect.innerHTML = '<option value="0" selected >جميع الكليات</option>';

                        colleges.forEach(college => {
                            const option = document.createElement('option');
                            option.value = college._id;
                            option.textContent = college.name;
                            collegeSelect.appendChild(option);
                        });
                    } catch (error) {
                        console.error('Error loading specializations:', error);
                        showMessage('فشل في تحميل الكليات. يرجى تحديث الصفحة.', 'error');
                    }
                }

                async function loadSpecializations(college) {
                    try {
                        const response = await fetch(`/specializations/${college}`); // Assuming this endpoint exists and returns all specializations

                        // if (!response.ok) {
                        //     throw new Error('Failed to fetch specializations');
                        // }

                        if (response.status === 404) {
                            specializationSelect.innerHTML = ``;
                            const option = document.createElement('option');
                            option.value = "0";
                            option.textContent = "لم يتم العثور على تخصصات";
                            specializationSelect.appendChild(option);
                            return;
                        }

                        const specializations = await response.json();

                        specializationSelect.innerHTML = '<option value="0" selected >جميع التخصصات</option>'; // Reset options

                        specializations.forEach(spec => {
                            const option = document.createElement('option');
                            option.value = spec._id;
                            option.textContent = spec.name;
                            specializationSelect.appendChild(option);
                        });
                    } catch (error) {
                        console.error('Error loading specializations:', error);
                        showMessage('فشل في تحميل التخصصات. يرجى تحديث الصفحة.', 'error');
                    }
                }

                loadColleges();

                async function loadData(el) {

                    const specializationSelect = document.getElementById('specializationId');

                    if (el.value !== "0") {
                        specializationSelect.disabled = true;
                        loadSpecializations(el.value)
                        specializationSelect.disabled = false;
                    } else {

                        specializationSelect.innerHTML = ` <option selected disabled value="0">التخصص</option>
                        <option disabled value="0">لم يتم إختيار الكلية</option>`;
                    }

                }

                // loadSpecializations();


                //////////////////////////////

                async function search(event) {

                    event.preventDefault()

                    const searchButton = document.getElementById('searchBtn');
                    const searchInput = document.getElementById('searchQuery');
                    const collegeSelect = document.getElementById('collegeId');
                    const searchSelect = document.getElementById('specializationId');
                    const searchResultsDiv = document.getElementsByClassName('contentsOfBooks')
                    const dataDisply = document.getElementById('content')
                    const pagination = document.getElementById("pagination")

                    pagination.style = "display:none;"

                    dataDisply.innerHTML = `<div class="searching d-flex jc-center ai-center fw-wrap"><svg width="50" height="50" viewBox="0 0 177 177" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#paint0_angular_8_2_clip_path)" data-figma-skip-parse="true"><g transform="matrix(-0.0885 0 0 -0.0885 88.5003 88.5)"><foreignObject x="-1011.3" y="-1011.3" width="2022.6" height="2022.6"><div xmlns="http://www.w3.org/1999/xhtml" style="background:conic-gradient(from 90deg,rgba(0, 86, 255, 1) 0deg,rgba(196, 196, 196, 0) 360deg);height:100%;width:100%;opacity:1"></div></foreignObject></g></g><path d="M88.5003 177C39.6231 177 0.000315726 137.377 0.000315726 88.5C0.000315726 39.6228 39.6231 3.05176e-05 88.5003 3.05176e-05C137.378 3.05176e-05 177 39.6228 177 88.5C177 137.377 137.378 177 88.5003 177ZM88.5003 17.7C49.3986 17.7 17.7003 49.3983 17.7003 88.5C17.7003 127.602 49.3986 159.3 88.5003 159.3C127.602 159.3 159.3 127.602 159.3 88.5C159.3 49.3983 127.602 17.7 88.5003 17.7Z" data-figma-gradient-fill="{&#34;type&#34;:&#34;GRADIENT_ANGULAR&#34;,&#34;stops&#34;:[{&#34;color&#34;:{&#34;r&#34;:0.0,&#34;g&#34;:0.33999991416931152,&#34;b&#34;:1.0,&#34;a&#34;:1.0},&#34;position&#34;:0.0},{&#34;color&#34;:{&#34;r&#34;:0.76862746477127075,&#34;g&#34;:0.76862746477127075,&#34;b&#34;:0.76862746477127075,&#34;a&#34;:0.0},&#34;position&#34;:1.0}],&#34;stopsVar&#34;:[],&#34;transform&#34;:{&#34;m00&#34;:-176.99998474121094,&#34;m01&#34;:-6.4355645649789156e-14,&#34;m02&#34;:177.00030517578125,&#34;m10&#34;:6.4355645649789156e-14,&#34;m11&#34;:-176.99998474121094,&#34;m12&#34;:177.00001525878906},&#34;opacity&#34;:1.0,&#34;blendMode&#34;:&#34;NORMAL&#34;,&#34;visible&#34;:true}"/>
<defs>
<clipPath id="paint0_angular_8_2_clip_path"><path d="M88.5003 177C39.6231 177 0.000315726 137.377 0.000315726 88.5C0.000315726 39.6228 39.6231 3.05176e-05 88.5003 3.05176e-05C137.378 3.05176e-05 177 39.6228 177 88.5C177 137.377 137.378 177 88.5003 177ZM88.5003 17.7C49.3986 17.7 17.7003 49.3983 17.7003 88.5C17.7003 127.602 49.3986 159.3 88.5003 159.3C127.602 159.3 159.3 127.602 159.3 88.5C159.3 49.3983 127.602 17.7 88.5003 17.7Z"/></clipPath></defs>
</svg>
جار البحث ...
</div>`;

                    const searchText = searchInput.value.trim();
                    const selectedCourseId = searchSelect.value; // Or get from Treeselect instance
                    const collegeSelectId = collegeSelect.value
                    // Construct query parameters
                    const queryParams = new URLSearchParams();

                    if (searchText) {
                        queryParams.append('name', searchText); // 'q' for query text
                    }

                    if (collegeSelectId) {
                        queryParams.append('college', collegeSelectId);
                    }
                    if (selectedCourseId) {
                        queryParams.append('specialization', selectedCourseId);
                    }

                    // If neither is provided, you might want to show all results or a message
                    if (!searchText && !selectedCourseId) {
                        searchResultsDiv.innerHTML = '<p>الرجاء إدخال نص للبحث أو اختيار مادة.</p>';
                        return;
                    }

                    try {
                        // Send GET request to your backend search endpoint
                        const response = await fetch(`/courses/search?${queryParams.toString()}`);
                        const data = await response.json();

                        if (response.ok) {

                            dataDisply.innerHTML = ``

                            data.data.forEach(c => {
                                console.log(c)
                                const bookBox = document.createElement('div');
                                bookBox.className = 'book-box';
                                bookBox.style.display = 'block';
                                bookBox.onclick = function () {
                                    window.location.href = `/book/${c._id}`;
                                };


                                const bookCoverImg = document.createElement('img');
                                bookCoverImg.src = c.cover;
                                bookCoverImg.alt = 'Book';

                                const bookTitle = document.createElement('div');
                                bookTitle.className = 'book-title';
                                bookTitle.textContent = c.name; // 'name' هو اسم المادة أو الكتاب

                                const bookDetails = document.createElement('div');
                                bookDetails.className = 'book-details';

                                const bookTag = document.createElement('div');
                                bookTag.className = 'book-tag';
                                bookTag.textContent = c.specializationName; // 'specializationName' هو اسم التخصص

                                const bookSearch = document.createElement('div');
                                bookSearch.className = 'book-search';

                                bookSearch.innerHTML = `
                                          <svg width="12" height="15" viewBox="0 0 10 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                                             <path d="M7.72048 8.65489C6.35364 10.0434 4.13757 10.0434 2.77073 8.65489C2.08732 7.96063 1.74561 7.05068 1.74561 6.14074C1.7456 5.23079 2.08731 4.32084 2.77073 3.62657C2.77073 3.62657 3.05813 4.36294 3.93313 4.80738C3.93313 3.91849 4.15187 2.58516 5.23943 1.69629C6.12061 2.58518 7.03549 2.93071 7.72048 3.62657C8.4039 4.32084 8.74561 5.23079 8.74561 6.14074C8.7456 7.05068 8.4039 7.96063 7.72048 8.65489Z" stroke="#FF7700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                            </svg>
                                                      ${c.views || 0}
                                                `;

                                bookDetails.appendChild(bookTag);
                                bookDetails.appendChild(bookSearch);

                                bookBox.appendChild(bookCoverImg);
                                bookBox.appendChild(bookTitle);
                                bookBox.appendChild(bookDetails);
                                dataDisply.appendChild(bookBox)
                            })

                            pagination.style = "display:flex;"
                            loadPagination();
                        } else if (response.status === 404) {
                            dataDisply.innerHTML = `<div class="searchingNone d-flex jc-center ai-center fw-wrap"><svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect width="50" height="50" fill="url(#pattern0_36_2242)"/>
<defs>
<pattern id="pattern0_36_2242" patternContentUnits="objectBoundingBox" width="1" height="1">
<use xlink:href="#image0_36_2242" transform="scale(0.0138889)"/>
</pattern>
<image id="image0_36_2242" width="72" height="72" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
</defs>
</svg>
${data.message}
</div>`;
                        }
                    } catch (error) {
                        console.error('Error during search:', error);
                        searchResultsDiv.innerHTML = '<p style="color: red;">حدث خطأ في الاتصال بالخادم.</p>';
                    }
                }

            </script>


</body>

</html>